
데이터 베이스
==========================
## 스키마 == 메타데이터
* 정의
데이터 베이스의 설계를 의미
> 개체, 속성, 관계 및 데이터 값들이 갖는 제약 조건을 표시

### 외부 스키마
 * 정의
사용자 관점에서 논리적 구조를 기술
> 서브 스키마라고도 하며, View의 개념

### 개념 스키마
* 정의
조직체나 기관의 관점에서 논리적 구조를 기술
> 1Database 에는 1개념스키마가 존재

### 내부 스키마
* 정의
물리적인 저장장치의 면에서 논리적 구조를 기술
> 내부 스키마는 하나이며 인덱스, 데이터 레코드 배치 방법, 데이터 압축 등에 관한 사항 포함

### 데이터 독립성
* 논리적 데이터 독립성(logical data independence)
1. 외부 스키마와 개념 스키마 사이의 독립성
2. 개념 스카마가 변경되어도 외부 스키마에는 영향을 미치지 않아야 함
> 개념 스키마의 테이블을 생성 및 변경하여도 외부 스키마가 직접 다루는 테이블이 아니면 영향이 없음

* 물리적 데이터 독립성(physical data independence)
1. 개념 스키마와 내부 스키마 사이의 독립성
2. 저장장치 구조 변경과 같이 내부 스키마가 변경되어도 개념 스키마에 영향을 미치지 않아야 함
> 성능 개선을 위하여 물리적 저장 장치를 재구성할 경우 개념 스키마나 외부 스키마에 영향이 없음

물리적 독립성은 논리적 독립성보다 구현하기 쉬움

## 관계 데이터 모델
### 릴레이션
행과 열로 구성된 테이블

![image](https://user-images.githubusercontent.com/96763658/177753859-9a88c6f7-42e3-4a0c-8a60-89f4564e41b9.png)


#### 관계(Relationship)
* 정의
데이터 베이스의 속성간의 관계를 나타냄

1. 릴레이션 내에서 생성되는 관계: 릴레이션 내부의 데이터들의 관계
2. 릴레이션 간에 생성되는 관계: 릴레이션 간의 관계

#### 릴레이션 스키마
![image](https://user-images.githubusercontent.com/96763658/177754272-306ff933-ae60-4a08-9f6f-14d49446b941.png)

* 속성(attribute)
릴레이션 스키마의 **열**

* 도메인(domain)
속성이 가질 수 있는 값의 집합

* 차수(degree)
속성의 개수

#### 릴레이션 인스턴스
* 튜플(tuple)
릴레이션의 **행**

* 카디날리티(cardinality)
튜플의 수

* 관련 용어
![image](https://user-images.githubusercontent.com/96763658/177754493-a33512eb-913f-4545-a7fc-7a4d4b050844.png)

#### 릴레이션의 특징
1. 속성은 단일 값을 가진다
> 각 속성(열)의 값은 도메인(자료형)에 정의된 값만을 가지며 모두 단일 값이여야 함
2. 속성은 서로 다른 이름을 가진다
> 속성은 한 릴레이션(테이블)에서 서로 다른 이름을 가져야 함
3. 한 속성의 값은 모두 같은 도메인 값을 가진다
> 한 속성에 속한 열은 모두 그 속성에서 정의한 도메인(자료형)의 값만 가질 수 있음
4. 속성의 순서는 상관없다
> 속성(열)의 순서가 달라도 릴레이션 스키마는 같음
5. 릴레이션 내의 중복된 튜플은 허용하지 않는다
> 하나의 릴레이션 인스턴스(데이터)내에는 서로 중복된 값을 가질 수 없음, 즉 모든 튜플(행)은 서로 값이 달라야 함
6. 튜플의 순서는 상관없다
> 튜플(행)의 순서가 달라도 같은 릴레이션임, 관계 데이터 모델의 튜플(행)은 실제적인 값을 가지고 있으며 값은 시간이 지남에 따라 데이터의 삭제, 수정, 삽입으로 인해 순서가 바뀔 수 있음

## 키
* 정의
특정 튜플(행)을 식별할 때 사용하는 속성(열) 혹은 속성(열)의 집합

> 릴레이션(테이블)은 중복된 튜플(행)을 허용하지 않기 떄문에 각각의 튜플(행)에 포함된 속성(열)들 중 어느 하나 혹은 하나 이상은 값이 달라야 함
>> 키가 되는 속성(열), 속성의 집합은 반드시 값이 달라서 튜플(행)들을 서로 구별 할 수 있어야 함
>>> 키는 릴레이션(테이블)의 관계를 맺는데도 사용

### 슈퍼키(Super Key)
![image](https://user-images.githubusercontent.com/96763658/177757869-0863e561-2271-4601-a8bb-bd59f9e6055f.png)

* 정의
튜플을 유일하게 식별할 수 있는 하나의 속성 혹은 속성의 집합
> **튜플을 유일하게** 식별 할 수 있는 값이면 **모두** 슈퍼키가 될 수 있음

### 후보키(Candidate Key)
* 정의
튜플을 유일하게 식별할 수 있는 속성의 **최소 집합**
> 2개 이상의 속성으로 이루어질 수 있음(최소 집합)
> 2개 이상의 속성으로 이루어진 키를 복합키(Composite key)라고 함

### 기본키(Primary Key)
* 정의
여러 후보키 중 하나를 선정하여 대표로 삼는 키
> 후보키가 하나라면 해당 후보키가 기본키가 되지만, 여러개 일 경우 릴레이션의 특성을 반영하여 하나를 선정함

* 선정 시 고려사항
1. 릴레이션 내 튜플을 식별 할 수 있는 고유한 값을 가져야 함
2. NULL값 허용하지 않음
3. 선정할 키 값은 변동이 일어나지 않아야 함
4. 최대한 적은 수 의 속성을 가진것이여야 함
5. 향후 키를 사용하는데 있어서 문제 발생 소지가 없어야 함

### 대리키(Surrogate Key) == 인조키(Artificial Key)
* 정의
기본키가 보안을 요하거나, 여러 속성으로 구성되어 복잡하거나, 마땅한 기본 키가 없을 경우에 **일련번호 같은 가상의 속성을 만들어 기본키로 설정**하는 것을 대리키 라고 함
> DBMS, 관련 소프트웨어에서 임의로 생성하는 값으로 직관적으로 그 값의 의미를 알 수 없음

### 대체키(Alternate Key)
* 정의
기본 키로 선정되지 않은 후보 키

### 외래키(Foreign Key)
![image](https://user-images.githubusercontent.com/96763658/177757678-9dca1220-9bc1-474d-bb0e-232931232538.png)

* 정의
다른 릴레이션의 기본키를 참조하는 속성

* 특징
1. 관계 데이터 모델의 특징인 릴레이션 간의 관계(Relationship)를 표현
2. 다른 릴레이션의 기본키를 참조
3. 외래키와 기본키의 도메인(자료형)은 서로 같아야함
4. 기본키 값이 변경되면 외래키 값도 변경됨
5. NULL값, 중복값 허용
6. 자기 자신의 기본키를 참조하기도 함
7. 외래키가 기본키의 일부가 될 수 있음

## 무결성 제약조건
* 데이터 무결성
데이터베이스에 저장된 데이터의 일관성, 정확성을 지키는 것

* 도메인 무결성 제약조건 == 도메인 제약
릴레이션 내의 튜플들이 각 속성의 도메인에 지정된 값만을 가져야 한다는 조건

* 개체 무결성 제약조건 == 기본키 제약
릴레이션은 기본키를 지정하고, 기본 키는 NULL값을 가져서는 안되며 릴레이션 내에 오직 하나만 존재해야 한다는 조건
> 삽입
>> 기본키 값이 같으면 삽입 금지

> 수정
>> 기본키 값이 같거나 NULL로 수정 금지

> 삭제
>> 특별한 확인이 필요 없으며 즉시 수행

* 참조 무결성 제약조건 == 외래키 제약
자식 릴레이션의 외래키는 부모 릴레이션의 기본키와 도메인이 동일 해야 하며, 자식 릴레이션 값이 변경 될 때 부모 릴레이션의 제약을 받는다는 조건
> 삽입
>> 부모릴레이션: 튜플을 삽입한 후 수행하면 정상적 진행
>> 자식릴레이션: 참조받는 테이블에 외래키 값이 없을경우 삽입 금지

> 수정
>> 삭제와 삽입 명령이 연속해서 수행
>> 부모 릴레이션의 수정이 일어날 경우 삭제 옵션에 따라 처리 후 문제 없으면 삽입 제약조건에 따라 처리

![image](https://user-images.githubusercontent.com/96763658/177759820-abd21f97-5de9-433d-81d7-b0e389efe56b.png)
> 삭제
>> 부모릴레이션: 참조하는 테이블을 같이 삭제 할 수 있어서 금지하거나 다른 추가 작업이 필요
>> 자식릴레이션: 바로 삭제 가능
>>> 부모릴레이션에서 튜플을 삭제 할 경우 참조 무결성 조건을 수행하기 위한 고려사항
>>(작업중지, 자식릴레이션 관련 튜플 삭제, 초기에 결정한 다른값으로 변경, NULL값으로 설정)



## UNIQUE 제약조건
* UNIQUE 제약조건
속성의 모든 값은 서로 같은 값이 없어야 한다는 것
> 릴레이션 내의 각각의 튜플을 유일하게 식별할 수 있는 속성들의 집합

**※ 기본키 제약과는 달리 NULL값을 허용함**

## 관계대수(Relational algebra)
* 정의
릴레이션에서 원하는 결과를 얻기 위해 수학의 대수와 같은 연산을 이용하여 질의하는 방법을 기술하는 언어

* 관계대수와 관계해석
> 관계대수
>> **어떤 데이터를 어떻게 찾는지**에 대한 **처리 절차**를 명시한 언어, DBMS 내부의 처리언어로 사용

> 관계해석
>> **어떤 데이터를 찾는지** 명시하는 **선언적인** 언어, SQL의 이론적인 기반을 제공

### 릴레이션의 수학적 개념
릴레이션은 집합이므로 집합에서 가능한 합집합, 교집합, 카티션 프로턱트 사용 가능

* 카티션 프로덕트
두 릴레이션의 **조합 가능한 모든** 릴레이션을 구하기 위한 연산

### 관계대수 연산자
![image](https://user-images.githubusercontent.com/96763658/177760611-8ba3ac7a-ac73-4246-8f62-3c3d3223bfd6.png)
